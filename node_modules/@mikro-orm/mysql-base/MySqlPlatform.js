"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MySqlPlatform = void 0;
const knex_1 = require("@mikro-orm/knex");
const MySqlSchemaHelper_1 = require("./MySqlSchemaHelper");
const MySqlExceptionConverter_1 = require("./MySqlExceptionConverter");
class MySqlPlatform extends knex_1.AbstractSqlPlatform {
    constructor() {
        super(...arguments);
        this.schemaHelper = new MySqlSchemaHelper_1.MySqlSchemaHelper();
        this.exceptionConverter = new MySqlExceptionConverter_1.MySqlExceptionConverter();
    }
    getDefaultCharset() {
        return 'utf8mb4';
    }
    getSearchJsonPropertyKey(path, type) {
        const [a, ...b] = path;
        return `${this.quoteIdentifier(a)}->'$.${b.join('.')}'`;
    }
}
exports.MySqlPlatform = MySqlPlatform;
